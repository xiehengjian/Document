(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{573:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop"}},[s._v("#")]),s._v(" Hadoop")]),s._v(" "),t("h2",{attrs:{id:"hadoop是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop是什么"}},[s._v("#")]),s._v(" Hadoop是什么")]),s._v(" "),t("ul",[t("li",[s._v("Hadoop是一个由Apache基金会所开发的分布式系统基础架构")]),s._v(" "),t("li",[s._v("主要解决海量数据的存储和分析计算问题")]),s._v(" "),t("li",[s._v("广义上来说，Hadoop通常是指一个更广泛的概念——Hadoop生态圈")])]),s._v(" "),t("h2",{attrs:{id:"发展历史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发展历史"}},[s._v("#")]),s._v(" 发展历史")]),s._v(" "),t("ul",[t("li",[s._v("Lucene是Doug cutting开创的开源软件，用java书写代码，实现与谷歌类似的全文搜索功能，它提供了全文检索引擎的架构，包括完整的查询引擎和索引引擎")]),s._v(" "),t("li",[s._v("2001年年底Lucene成为Apache基金会的一个子项目")]),s._v(" "),t("li",[s._v("对于海量数据的场景，Lucene面对与谷歌同样的困难，存储数据困难，检索速度慢")]),s._v(" "),t("li",[s._v("学习和模仿谷歌解决这些问题的办法：微信Nutch")]),s._v(" "),t("li",[s._v("谷歌是Hadoop的思想之源（谷歌在大数据方面的三篇论文）\n"),t("ul",[t("li",[s._v("GFS——>HDFS")]),s._v(" "),t("li",[s._v("Map-Reduce——>MR")]),s._v(" "),t("li",[s._v("BigTable——>HBase")])])]),s._v(" "),t("li",[s._v("2003-2004年，谷歌公开了部分GFS和MapReduce思想的细节，依次为基础Doug cutting等人用2年业余时间实现了DFS和MapReduce机制，使Nutch性能飙升")]),s._v(" "),t("li",[s._v("2005年Hadoop作为Lucene的子项目Nutch的一部分正式引入Apache基金会")]),s._v(" "),t("li",[s._v("2006年3月份，Map-Reduce的Nutch Distributed file system分别纳入称为Hadoop的项目中")]),s._v(" "),t("li",[s._v("Hadoop就此诞生且快速发展，标志着大数据时代来临")])]),s._v(" "),t("h2",{attrs:{id:"hadoop三大发行版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop三大发行版本"}},[s._v("#")]),s._v(" Hadoop三大发行版本")]),s._v(" "),t("h3",{attrs:{id:"apache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[s._v("#")]),s._v(" Apache")]),s._v(" "),t("p",[s._v("最原始的版本，入门学习最好")]),s._v(" "),t("h3",{attrs:{id:"cloudera"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloudera"}},[s._v("#")]),s._v(" Cloudera")]),s._v(" "),t("p",[s._v("在大型互联网企业中用的较多")]),s._v(" "),t("h3",{attrs:{id:"hortonworks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hortonworks"}},[s._v("#")]),s._v(" Hortonworks")]),s._v(" "),t("p",[s._v("文档较好")]),s._v(" "),t("h2",{attrs:{id:"hadoop的优势"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop的优势"}},[s._v("#")]),s._v(" Hadoop的优势")]),s._v(" "),t("ul",[t("li",[s._v("高可靠性：Hadoop底层维护多个数据副本，所以即使Hadoop某个计算元素或存储出现故障，也不会导致数据的丢失")]),s._v(" "),t("li",[s._v("高扩展性：在集群间分配任务数据，可方便的扩展数以千计的节点")]),s._v(" "),t("li",[s._v("高效性：在MapReduce的思想下，Hadoop是并行工作的，以加快任务处理速度")]),s._v(" "),t("li",[s._v("高容错性：能够自动将失败的任务重新分配")])]),s._v(" "),t("h2",{attrs:{id:"hadoop组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop组成"}},[s._v("#")]),s._v(" Hadoop组成")]),s._v(" "),t("h3",{attrs:{id:"hadoop-1-x组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-1-x组成"}},[s._v("#")]),s._v(" Hadoop 1.x组成")]),s._v(" "),t("ul",[t("li",[s._v("MapReduce:计算+调度资源")]),s._v(" "),t("li",[s._v("HDFS：数据存储")]),s._v(" "),t("li",[s._v("Common：辅助工具")])]),s._v(" "),t("h3",{attrs:{id:"hadoop-2-x组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-2-x组成"}},[s._v("#")]),s._v(" Hadoop 2.x组成")]),s._v(" "),t("ul",[t("li",[s._v("MapReduce:计算")]),s._v(" "),t("li",[s._v("Yarn：资源调度")]),s._v(" "),t("li",[s._v("HDFS：数据存储")]),s._v(" "),t("li",[s._v("Common：辅助工具")])]),s._v(" "),t("h3",{attrs:{id:"hdfs架构概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hdfs架构概述"}},[s._v("#")]),s._v(" HDFS架构概述")]),s._v(" "),t("ul",[t("li",[s._v("NameNode(nn):存储文件的元数据，如文件名，文件目录结构，文件属性（生成时间、副本数、文件权限），以及每个文件的块列表和块所在的DataNode等")]),s._v(" "),t("li",[s._v("DataNode(dn):在本地文件系统存储文件块数据，以及块数据的校验和")]),s._v(" "),t("li",[s._v("Secondary NameNode(2nn):用来监控HDFS状态的辅助后台程序，每隔一段时间获取HDFS元数据的快照")])]),s._v(" "),t("h3",{attrs:{id:"yarn架构概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn架构概述"}},[s._v("#")]),s._v(" Yarn架构概述")]),s._v(" "),t("h4",{attrs:{id:"resourcemanager-rm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resourcemanager-rm"}},[s._v("#")]),s._v(" ResourceManager(RM)")]),s._v(" "),t("ul",[t("li",[s._v("处理客户端请求")]),s._v(" "),t("li",[s._v("监控NodeManager")]),s._v(" "),t("li",[s._v("启动或监控ApplicationMaster")])]),s._v(" "),t("h4",{attrs:{id:"nodemanager-nm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nodemanager-nm"}},[s._v("#")]),s._v(" NodeManager(NM)")]),s._v(" "),t("ul",[t("li",[s._v("管理单个节点上的资源")]),s._v(" "),t("li",[s._v("处理来自ResourceManager的命令")]),s._v(" "),t("li",[s._v("处理来自ApplicationMaster的命令")])]),s._v(" "),t("h4",{attrs:{id:"applicationmaster-am"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#applicationmaster-am"}},[s._v("#")]),s._v(" ApplicationMaster(AM)")]),s._v(" "),t("ul",[t("li",[s._v("负责数据的切分")]),s._v(" "),t("li",[s._v("为应用程序申请资源并分配给内部的任务")]),s._v(" "),t("li",[s._v("任务的监控与容错")])]),s._v(" "),t("h4",{attrs:{id:"container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#container"}},[s._v("#")]),s._v(" Container")]),s._v(" "),t("p",[s._v("Container是YARN中的资源抽象，它封装了某个节点上的多个维度资源，如内存、cpu、磁盘，网络等")]),s._v(" "),t("h3",{attrs:{id:"mapreduce架构概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapreduce架构概述"}},[s._v("#")]),s._v(" MapReduce架构概述")]),s._v(" "),t("blockquote",[t("p",[s._v("MapReduce将计算过程分为两个阶段：Map和Reduce")])]),s._v(" "),t("ul",[t("li",[s._v("Map阶段并行处理输入数据")]),s._v(" "),t("li",[s._v("Reduce阶段对Map结果进行汇总")])]),s._v(" "),t("h2",{attrs:{id:"大数据生态体系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#大数据生态体系"}},[s._v("#")]),s._v(" 大数据生态体系")]),s._v(" "),t("h3",{attrs:{id:"数据来源层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据来源层"}},[s._v("#")]),s._v(" 数据来源层")]),s._v(" "),t("ul",[t("li",[s._v("数据库（结构化数据）")]),s._v(" "),t("li",[s._v("文件日志（半结构化数据）")]),s._v(" "),t("li",[s._v("视频、ppt等（非结构化数据）")])]),s._v(" "),t("h3",{attrs:{id:"数据传输层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据传输层"}},[s._v("#")]),s._v(" 数据传输层")]),s._v(" "),t("ul",[t("li",[s._v("Sqoop数据传递")]),s._v(" "),t("li",[s._v("Flume日志收集")]),s._v(" "),t("li",[s._v("kafka消息队列")])]),s._v(" "),t("h3",{attrs:{id:"数据存储层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据存储层"}},[s._v("#")]),s._v(" 数据存储层")]),s._v(" "),t("ul",[t("li",[s._v("HBase非关系型数据库")]),s._v(" "),t("li",[s._v("HDFS文件存储")]),s._v(" "),t("li",[s._v("Kffka消息队列")])]),s._v(" "),t("h3",{attrs:{id:"资源管理层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资源管理层"}},[s._v("#")]),s._v(" 资源管理层")]),s._v(" "),t("ul",[t("li",[s._v("YARN资源管理")])]),s._v(" "),t("h3",{attrs:{id:"数据计算层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据计算层"}},[s._v("#")]),s._v(" 数据计算层")]),s._v(" "),t("ul",[t("li",[s._v("MapReduce离线计算\n"),t("ul",[t("li",[s._v("Hive数据查询")]),s._v(" "),t("li",[s._v("Mahout数据挖掘")])])]),s._v(" "),t("li",[s._v("Spark Core内存计算\n"),t("ul",[t("li",[s._v("Maout数据挖掘")]),s._v(" "),t("li",[s._v("Spark Mlib数据挖掘")]),s._v(" "),t("li",[s._v("Spark R数据分析")]),s._v(" "),t("li",[s._v("Spark Sql数据查询")]),s._v(" "),t("li",[s._v("Spark streaming实时计算")])])]),s._v(" "),t("li",[s._v("storm实时计算")])]),s._v(" "),t("h3",{attrs:{id:"任务调度层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务调度层"}},[s._v("#")]),s._v(" 任务调度层")]),s._v(" "),t("ul",[t("li",[s._v("Oozie任务调度")]),s._v(" "),t("li",[s._v("Azkaban任务调度")])]),s._v(" "),t("h3",{attrs:{id:"业务模型层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#业务模型层"}},[s._v("#")]),s._v(" 业务模型层")]),s._v(" "),t("ul",[t("li",[s._v("业务模型")]),s._v(" "),t("li",[s._v("数据可视化")]),s._v(" "),t("li",[s._v("业务应用")])]),s._v(" "),t("h2",{attrs:{id:"环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[s._v("#")]),s._v(" 环境搭建")]),s._v(" "),t("blockquote",[t("p",[s._v("实验中可能会涉及如curl、wget、vim等基础工具，本文略去安装过程以节省篇幅。")])]),s._v(" "),t("h3",{attrs:{id:"虚拟机准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机准备"}},[s._v("#")]),s._v(" 虚拟机准备")]),s._v(" "),t("h4",{attrs:{id:"安装虚拟机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装虚拟机"}},[s._v("#")]),s._v(" 安装虚拟机")]),s._v(" "),t("blockquote",[t("p",[s._v("本次实验我使用了MAC平台的Parallels虚拟机平台来建立虚拟机。镜像源为阿里云的Ubuntu18.04")])]),s._v(" "),t("p",[s._v("建立三台虚拟机，分配为"),t("code",[s._v("Hadoop-1")]),s._v("、"),t("code",[s._v("Hadoop-2")]),s._v("、"),t("code",[s._v("Hadoop-3")])]),s._v(" "),t("p",[s._v("成功启动后，按下图所示安装"),t("code",[s._v("Parallels Tools")]),s._v("可实现主机与虚拟机的直接通信")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101185937601.png",alt:"image-20201101185937601"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101190108055.png",alt:"image-20201101190108055"}})]),s._v(" "),t("h4",{attrs:{id:"关闭防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭防火墙"}},[s._v("#")]),s._v(" 关闭防火墙")]),s._v(" "),t("blockquote",[t("p",[s._v("使用Parallels安装最小版的ubuntu没有防火墙，故不需要关闭")])]),s._v(" "),t("h4",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("blockquote",[t("p",[s._v("新建 hadoop 用户，这个用户专门用来维护集群，因为实际中使用 root 用户的机会很少，而且不安全。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# groupadd hadoop")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd -s /bin/bash -g hadoop -d /home/hadoop -m hadoop")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd hadoop")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101195200113.png",alt:"image-20201101195200113"}})]),s._v(" "),t("h4",{attrs:{id:"准备ssh环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备ssh环境"}},[s._v("#")]),s._v(" 准备SSH环境")]),s._v(" "),t("blockquote",[t("p",[s._v("使用Parallels安装的虚拟机不需要配置网卡，但是需要安装ssh的server端才可以接收ssh请求")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssh-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"修改hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改hosts"}},[s._v("#")]),s._v(" 修改HOSTS")]),s._v(" "),t("p",[s._v("查看三台虚拟机的ip地址")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101203112170.png",alt:"image-20201101203112170"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101203152453.png",alt:"image-20201101203152453"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101203239156.png",alt:"image-20201101203239156"}})]),s._v(" "),t("p",[s._v("将如下内容添加到"),t("code",[s._v("/etc/hosts")]),s._v("中")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("10.211.55.33 cluster1\n10.211.55.34 cluster2\n10.211.55.35 cluster3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("测试")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101203441418.png",alt:"image-20201101203441418"}})]),s._v(" "),t("h4",{attrs:{id:"秘钥配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#秘钥配置"}},[s._v("#")]),s._v(" 秘钥配置")]),s._v(" "),t("blockquote",[t("p",[s._v("只需在cluster1上执行")])]),s._v(" "),t("h5",{attrs:{id:"生成秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成秘钥"}},[s._v("#")]),s._v(" 生成秘钥")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ ssh-keygen -t rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101203730740.png",alt:"image-20201101203730740"}})]),s._v(" "),t("h5",{attrs:{id:"分发秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分发秘钥"}},[s._v("#")]),s._v(" 分发秘钥")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ ssh-copy-id cluster1\n$ ssh-copy-id cluster2\n$ ssh-copy-id cluster3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101204838706.png",alt:"image-20201101204838706"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101204905433.png",alt:"image-20201101204905433"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101204925641.png",alt:"image-20201101204925641"}})]),s._v(" "),t("h3",{attrs:{id:"软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[s._v("#")]),s._v(" 软件安装")]),s._v(" "),t("h4",{attrs:{id:"基础依赖安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础依赖安装"}},[s._v("#")]),s._v(" 基础依赖安装")]),s._v(" "),t("blockquote",[t("p",[s._v("以下命令三台虚拟机均执行")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" perl*\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntpdate\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio-dev\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntp\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openjdk-8-jdk\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("修改ntp配置")]),s._v(" "),t("p",[s._v("在cluster1中找到/etc/ntp.conf文件，找到以下内容并注释")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pool 0.ubuntu.pool.ntp.org iburst\npool 1.ubuntu.pool.ntp.org iburst\npool 2.ubuntu.pool.ntp.org iburst\npool 3.ubuntu.pool.ntp.org iburst\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("在最下面加入以下内容")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("restrict default ignore\nrestrict 10.0.2.0 mask 255.255.255.0 nomodify notrap \nserver 127.127.1.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("重启ntp")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" ntp restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在cluster2和cluster3中设定定时任务来向服务器同步日志")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$crontab")]),s._v(" -e\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("输入如下内容后保存退出")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" * * * /usr/sbin/ntpdate cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">>")]),s._v(" /root/ntpd.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"mysql安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装"}},[s._v("#")]),s._v(" MySQL安装")]),s._v(" "),t("blockquote",[t("p",[s._v("在cluster2上安装mysql")])]),s._v(" "),t("h5",{attrs:{id:"安装服务端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端"}},[s._v("#")]),s._v(" 安装服务端")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"安装客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装客户端"}},[s._v("#")]),s._v(" 安装客户端")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-client\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"新建mysql用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建mysql用户"}},[s._v("#")]),s._v(" 新建Mysql用户")]),s._v(" "),t("blockquote",[t("p",[s._v("mysql安装后会自动创建mysql用户与用户组，不需要专门创建")])]),s._v(" "),t("p",[s._v("登录mysql测试")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101224233018.png",alt:"image-20201101224233018"}})]),s._v(" "),t("p",[s._v("配置访问权限")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101224532395.png",alt:"image-20201101224532395"}})]),s._v(" "),t("h4",{attrs:{id:"安装zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装zookeeper"}},[s._v("#")]),s._v(" 安装Zookeeper")]),s._v(" "),t("blockquote",[t("p",[s._v("三台均安装")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" Zookeeper\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("找到/etc/zookeeper/conf/zoo.cfg文件，进行如下修改,并创建相关文件夹")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("dataDir=/home/hadoop_files/hadoop_data/zookeeper\ndataLogDir=/home/hadoop_files/hadoop_logs/zookeeper/dataLog\nserver.1=cluster1:2888:3888\nserver.2=cluster2:2888:3888\nserver.3=cluster3:2888:3888\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("data 目录中创建一个文件 myid，输入内容为 编号, myid 应与 zoo.cfg 中的集群节点相匹配")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "1" >> /home/hadoop_files/hadoop_data/zookeeper/myid')]),s._v("\n//1号机输入1，2号机器输入2，3号机器输入3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("/usr/share/zookeeper/bin/zkEnv.sh")]),s._v("，按如下修改")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ZOO_LOG_DIR}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOO_LOG_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/hadoop_files/hadoop_logs/zookeeper/logs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ZOO_LOG4J_PROP}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOO_LOG4J_PROP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"INFO,ROLLINGFILE"')]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("/etc/zookeeper/conf/log4j.properties")]),s._v("，按如下修改")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("zookeeper.root.logger=INFO,ROLLINGFILE log4j.appender.ROLLINGFILE=org.apache.log4j.DailyRollingFileAppender\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"启动zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动zookeeper"}},[s._v("#")]),s._v(" 启动zookeeper")]),s._v(" "),t("blockquote",[t("p",[s._v("三台依次执行")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  /usr/share/zookeeper/bin\n$ ./zkServer.sh start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("JPS查看进程")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101230025743.png",alt:"image-20201101230025743"}})]),s._v(" "),t("h4",{attrs:{id:"安装kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装kafka"}},[s._v("#")]),s._v(" 安装Kafka")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirror.bit.edu.cn/apache/kafka/2.3.1/kafka_2.11-2.3.1.tgz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf kafka_2.11-2.3.1.tgz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" kafka_2.11-2.3.1 kafka\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("设置环境变量")]),s._v(" "),t("p",[s._v("将如下内容添加到/etc/profile中")]),s._v(" "),t("div",{staticClass:"language-profile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export KAFKA_HOME=/usr/local/kafka\nexport PATH=$PATH:$KAFKA_HOME/bin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("刷新")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("找到/usr/local/kafka/config/server.properties文件，按如下修改")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("broker.id=1 //或2、3\nlog.dirs=/home/hadoop_files/hadoop_logs/kafka\nzookeeper.connect=cluster1:2181,cluster2:2181,cluster3:2181\nadvertised.host.name=10.211.55.33\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("创建集群")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kafka-server-start.sh /usr/local/kafka/config/server.properties "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建topic")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kafka-topics.sh --create --zookeeper cluster1:2181,cluster2:2181,cluster3:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --topic mykafka\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101233537798.png",alt:"image-20201101233537798"}})]),s._v(" "),t("p",[s._v("查看topic")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kafka-topics.sh --list --zookeeper cluster1:2181,cluster2:2181,cluster3:2181\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201101233642702.png",alt:"image-20201101233642702"}})]),s._v(" "),t("h4",{attrs:{id:"安装hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hadoop"}},[s._v("#")]),s._v(" 安装Hadoop")]),s._v(" "),t("blockquote",[t("p",[s._v("Hadoop 启动的先决条件是 zookeeper 已经成功启动")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirrors.shu.edu.cn/apache/hadoop/common/hadoop-3.1.2/hadoop-3.1.2.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf hadoop-3.1.2.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" hadoop-3.1.2 hadoop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("/usr/local/hadoop/etc/hadoop/hadoop-env.sh")]),s._v("文件，按如下修改")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_PID_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/hadoop_files\n//使用openjdk安装，java目录不需要修改\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("/usr/local/hadoop/etc/hadoop/mapred-env.sh")]),s._v("文件，按如下修改")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_MAPRED_PID_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/hadoop_files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装指导书修改相关的xml文件，由于文件占用篇幅过大，此处不做展示。")]),s._v(" "),t("p",[s._v("修改环境变量")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export HADOOP_HOME=/usr/local/hadoop-2.6.5\nexport LD_LIBRARY_PATH=$HADOOP_HOME/lib/native\nexport PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("分别在三台设备上启动zookeeper、journalnode、")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ zkServer.sh start\n$ hadoop-daemon.sh start journalnode\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("在cluster1上启动HDFS与YARN")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ hdfs namenode -format\n$ hadoop-daemon.sh stop journalnode\n$ start-dfs.sh\n$ start-yarn.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("启动后可在浏览器中访问"),t("code",[s._v("10.211.55.33:50070")]),s._v("查看web页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102001904054.png",alt:"image-20201102001904054"}})]),s._v(" "),t("h4",{attrs:{id:"安装hbase"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hbase"}},[s._v("#")]),s._v(" 安装Hbase")]),s._v(" "),t("blockquote",[t("p",[s._v("HBase 启动的先决条件是 zookeeper 和 Hadoop 已经启动")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/2.0.4/hbase-2.0.4-bin.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf hbase-2.0.4-bin.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" hbase-2.0.4-bin hbase\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("hbase-env.sh")]),s._v("文件,按如下修改")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HBASE_LOG_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/hadoop_files/hadoop_logs/hbase/logs\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HBASE_MANAGES_ZK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HBASE_PID_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/hadoop_files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("安装指导书修改相关的xml文件，由于文件占用篇幅过大，此处不做展示。")]),s._v(" "),t("p",[s._v("修改环境变量")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export HBASE_HOME=/usr/local/hbase\nexport PATH=$HBASE_HOME/bin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("在cluster1上按之前介绍过的命令启动"),t("code",[s._v("zookeeper")]),s._v("、"),t("code",[s._v("HDFS")]),s._v("、"),t("code",[s._v("YARN")]),s._v("，然后启动"),t("code",[s._v("HBASE")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("start-hbase.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后访问"),t("code",[s._v("10.211.55.33:60010")]),s._v("可查看web页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102003305937.png",alt:"image-20201102003305937"}})]),s._v(" "),t("p",[s._v("进入Hbaseshell")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102004102364.png",alt:"image-20201102004102364"}})]),s._v(" "),t("p",[s._v("在浏览器也可以看到表")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102004136245.png",alt:"image-20201102004136245"}})]),s._v(" "),t("h4",{attrs:{id:"安装hive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hive"}},[s._v("#")]),s._v(" 安装Hive")]),s._v(" "),t("blockquote",[t("p",[s._v("以下内容除在 MySQL 中创建 hive 用户和创建 hive 数据库只用操作一次，其他操作需要在每个 Hadoop 结 点上都执行一次。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://mirrors.tuna.tsinghua.edu.cn/apache/hive/hive-1.2.2/apache-hive-1.2.2-bin.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf apache-hive-1.2.2-bin.tar.gz \n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" apache-hive-1.2.2-bin hive\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("在"),t("code",[s._v("/etc/profile")]),s._v("中追加如下内容")]),s._v(" "),t("div",{staticClass:"language-txt] line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export HIVE_HOME=/usr/local/hive\nexport PATH=$HIVE_HOME/bin:$HIVE_HOME/conf:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("登录Mysql并创建用户hive")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GRANT USAGE ON *.* TO "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),s._v(" WITH GRANT OPTION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" create database hive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all on hive.* to hive@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all on hive.* to hive@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" identified by "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all on hive.* to hive@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cluster2'")]),s._v(" identified by "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hive'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" flush privileges"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("验证hive用户")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102004557341.png",alt:"image-20201102004557341"}})]),s._v(" "),t("h4",{attrs:{id:"安装scala"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装scala"}},[s._v("#")]),s._v(" 安装Scala")]),s._v(" "),t("blockquote",[t("p",[s._v("三台设备")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" scala -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看版本")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102004840574.png",alt:"image-20201102004840574"}})]),s._v(" "),t("p",[s._v("Apt安装的scala不需要配置环境变量及权限")]),s._v(" "),t("h4",{attrs:{id:"安装spark"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装spark"}},[s._v("#")]),s._v(" 安装Spark")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" spark -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("复制 conf 文件夹里面 template 一份，改名为 spark-env.sh")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/spark-env.sh.template conf/spark-env.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("且加入如下内容")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPARK_MASTER_IP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cluster1\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_CONF_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/hadoop/etc/hadoop\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPARK_DIST_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("/usr/local/hadoop-2.6.5/bin/hadoop classpath"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPARK_CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HIVE_HOME")]),s._v("/lib/mysql-connector-java-5.1.43-bin.jar "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPARK_PID_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/hadoop_files\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("在 conf 下面新建一个叫 slaves 的文，加入如下内容")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster1\ncluster2 \ncluster3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("将 hive 目录下 conf 文件夹中的 hive-site.xml 复制到 spark 的 conf 目录下")]),s._v(" "),t("p",[s._v("将 hadoop/etc/hadoop 文件中的 hdfs-site.xml 和 core-site.xml 文件复制到 spark 的 conf 目录下")]),s._v(" "),t("p",[s._v("spark-defaults.conf.template不需复制，apt安装的spark已经配置好了")]),s._v(" "),t("p",[s._v("启动Spark")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ start-master.sh\n$ start-slaves.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("访问"),t("code",[s._v("10.211.55.33:8080")]),s._v("查看内容")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/spark-docker-ui-600x262.png",alt:"spark-docker-ui"}})]),s._v(" "),t("h4",{attrs:{id:"安装storm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装storm"}},[s._v("#")]),s._v(" 安装Storm")]),s._v(" "),t("blockquote",[t("p",[s._v("安装storm 需要 python2.6 以上的版本，Ubuntu18.04自带python3，不存在版本问题")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/nathanmarz/storm/downloads/storm-0.7.1.zip\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" storm-0.7.1.zip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("在"),t("code",[s._v("/etc/profile")]),s._v("中追加如下内容")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export STORM_HOME=/usr/local/storm-0.7.1 \nexport PATH=$STORM_HOME/bin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("找到"),t("code",[s._v("/usr/local/storm-0.7.1/conf/storm.yaml")]),s._v(",作如下更改")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storm.zookeeper.servers")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" “cluster1”\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" “cluster2”\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" “cluster3”\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("并追加一行")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storm.local.dir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/hadoop_files/hadoop_tmp/storm/tmp"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在cluster1新建虚拟窗口")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -S storm-master\n$ storm nimbus\n$ Ctrl+A+D\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -S storm-ui\n$ storm ui\n$ Ctrl+A+D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在cluster2和3中新建虚拟窗口")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -S storm-supervisor\n$ storm supervisor\n$ Ctrl+A+D\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -S storm-logviewer\n$ storm logviewer\n$ Ctrl+A+D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("查看进程")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102010205812.png",alt:"image-20201102010205812"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://img.hjxie.icu/image-20201102010307892.png",alt:"image-20201102010307892"}})]),s._v(" "),t("h2",{attrs:{id:"拓展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拓展"}},[s._v("#")]),s._v(" 拓展")]),s._v(" "),t("p",[s._v("使用虚拟机搭建hadoop集群占用了大量资源，使用docker来搭建集群会节省很多资源，在此给出一些简单的方案")]),s._v(" "),t("p",[s._v("安装docker")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" hjxie.icu:8000/docker/install/sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这是我本人提供的一个快速安装docker脚本，可以直接安装带阿里云加速的docker")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("Dockerfile")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("18.04\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" xiehengjian\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /root\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install openssh-server, openjdk and wget")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" apt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("get update && apt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("get install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("y openssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server openjdk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("jdk wget\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install hadoop 2.7.2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" wget https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/kiwenlau/compile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hadoop/releases/download/2.7.2/hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("2.7.2.tar.gz && \\\n    tar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("xzvf hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("2.7.2.tar.gz && \\\n    mv hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("2.7.2 /usr/local/hadoop && \\\n    rm hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("2.7.2.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# set environment variable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JAVA_HOME=/usr/lib/jvm/java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("openjdk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("amd64 \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" HADOOP_HOME=/usr/local/hadoop \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" PATH=$PATH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/hadoop/bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/hadoop/sbin \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh without key")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("keygen "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("t rsa "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f ~/.ssh/id_rsa "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("P "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" && \\\n    cat ~/.ssh/id_rsa.pub "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" ~/.ssh/authorized_keys\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p ~/hdfs/namenode && \\ \n    mkdir "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p ~/hdfs/datanode && \\\n    mkdir $HADOOP_HOME/logs\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" config/* /tmp/\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mv /tmp/ssh_config ~/.ssh/config && \\\n    mv /tmp/hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("env.sh /usr/local/hadoop/etc/hadoop/hadoop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("env.sh && \\\n    mv /tmp/hdfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml $HADOOP_HOME/etc/hadoop/hdfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml && \\ \n    mv /tmp/core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml $HADOOP_HOME/etc/hadoop/core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml && \\\n    mv /tmp/mapred"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml $HADOOP_HOME/etc/hadoop/mapred"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml && \\\n    mv /tmp/yarn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml $HADOOP_HOME/etc/hadoop/yarn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("site.xml && \\\n    mv /tmp/slaves $HADOOP_HOME/etc/hadoop/slaves && \\\n    mv /tmp/start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hadoop.sh ~/start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hadoop.sh && \\\n    mv /tmp/run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("wordcount.sh ~/run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("wordcount.sh\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" chmod +x ~/start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hadoop.sh && \\\n    chmod +x ~/run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("wordcount.sh && \\\n    chmod +x $HADOOP_HOME/sbin/start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dfs.sh && \\\n    chmod +x $HADOOP_HOME/sbin/start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("yarn.sh \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# format namenode")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /usr/local/hadoop/bin/hdfs namenode "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("format\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"service ssh start; bash"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br")])]),t("p",[s._v("Start.sh")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the default node number is 3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("N")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("3}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start hadoop master container")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f hadoop-master "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start hadoop-master container..."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -itd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                --net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50070")]),s._v(":50070 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v(":8088 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                --name hadoop-master "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                --hostname hadoop-master "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                kiwenlau/hadoop:1.0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start hadoop slave container")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("i")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" -lt "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$N")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f hadoop-slave"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start hadoop-slave'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(' container..."')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -itd "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t                --net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t                --name hadoop-slave"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t                --hostname hadoop-slave"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t                kiwenlau/hadoop:1.0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("i")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v(" $i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# get into hadoop master container")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it hadoop-master "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[s._v("创建网络")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker network create --driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bridge hadoop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建集群")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./start.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建后会进入容器，此时执行启动脚本，成功运行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./start-hadoop.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);