# 回溯法

## 基本概念

回溯法的大致思路是把问题的解空间构造为树结构，然后使用深度优先搜索策略对树进行遍历，寻找最优解或所有可能的解

### 问题的解空间

考虑下面的场景

> 你有一个设置好3位密码的旅行箱，不小心把密码忘记了，只记得密码中包含2，5，6三个数字，如何将密码箱打开

通过枚举，我们知道密码的所有可能的集合为：

==2 5 6== ==5 2 6== ==6 2 5== ==2 6 5== ==5 6 2== ==6 5 2==

则密码箱问题==所有可能解的集合==构成了问题的==解空间==

但是这种方法的效率很低，可以通过利用合适的数据结构将解空间很好组织起来来提高效率，

一方面有助于快速找到问题的解，另一方面可以防止遗漏部分可行解

![image-20201013113942517](http://img.hjxie.icu/image-20201013113942517.png)

### 排列树和子集树

#### 子集树

> 当所给问题是从n个元素的集合S中找出S满足性质的子集时，相应的解空间树称为子集树。

子集树的每一层表示每个元素的取舍，1表示选中该元素，0表示舍去该元素

如0-1背包问题，最大团问题，装载问题等的解空间都是子集树

#### 排列树

> 当所给问题是确定n个元素满足某种性质的排列时，相应的解空间树称为排列树

之前提高的密码箱问题的解空间树就是排列树

### 回溯法的基本步骤

1. 针对所给问题，明确问题的解空间
2. 确定易于搜索的解空间结构(排列树、子集树等)
3. 从根节点开始，采用深度优先的方式遍历解空间树

#### 剪枝策略

> 在解空间树的遍历过程中，为了避免无效搜索，采用剪枝策略提高搜索效率

1. 利用约束函数在扩展结点处剪去不满足约束条件的子树
2. 用限界函数剪去得不到最优解的子树